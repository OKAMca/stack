import { Canvas, Meta, Story } from '@storybook/addon-docs'
import { ArgTypes } from '@storybook/blocks'
import Accordion from './'
import CloseBtn from '../icons/CloseBtn'
import Button from '../Button'
import Typography from '../Typography'
import { Item } from '@react-stately/collections'
import AccordionItem from './components/AccordionItem'

<Meta
  title="Base Components/Accordion"
  component={Accordion}
  argTypes={{
    id: {
      description: 'Used for accessibility of controls',
    },
    onClick: {
      description:
        'Function passed into onClick will be called when clicking any accordion item child. It also gives back the state of the accordion after clicking it (`true` for opened, `false` for closed)',
    },
    tokens: {
      description: 'Takes in `textAlign` (`left` | `center`), `titleBold` (`boolean`)',
      defaultValue: {
        summary: '{ textAlign: left, titleBold: false }',
      },
    },
    children: {
      description: 'List of `AccordionItem`',
    },
    selectionMode: {
      description: 'Describes the selection mode for all the children items',
      options: ['multiple', 'single', 'none'],
      control: { type: 'radio' },
      defaultValue: 'single',
    },
  }}
  args={{
    id: '1',
    onSelectionChange: (keys) => console.log('Selection changed to: ', keys)
  }}
  parameters={{ layout: 'fullscreen' }}
/>

export const Template = (args) => (
  <Accordion {...args}>
    <AccordionItem key="item-1" title="This is an accordion">
      BODY TEXT: Is not the best kind of originality that which comes after a sound apprenticeship? That which shall
      prove to be the blending of a firm conception of, “useful precedent” and the progressive tendencies of an able
      mind.
    </AccordionItem>
  </Accordion>
)

export const TemplateWithFocusableChildren = (args) => (
  <Accordion {...args}>
    <AccordionItem key="item-1" title="This is an accordion" onClick={(isOpen) => console.log('On accordion item click', `isOpen: ${isOpen}`)}>
      <Button>Focusable item 1</Button>
      <Button>Focusable item 2</Button>
    </AccordionItem>
    <AccordionItem key="item-2" title="This is an accordion 2" defaultIsOpen>
      <Button>Focusable item</Button>
    </AccordionItem>
  </Accordion>
)

# Accordion

#### Accordion component. Elements that hide some more information when clicking on it.

## Props

<ArgTypes />

## Showcase

### Left Aligned Accordion

<Canvas>
  <Story
    name="Left Aligned"
    args={{
      id: 'accordion',
      icon: 'Plus',
      tokens: {
        titleBold: true,
        textAlign: 'left',
      },
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

### Centered Accordion

<Canvas>
  <Story
    name="Center Aligned"
    args={{
      id: 'accordion',
      tokens: {
        textAlign: 'center',
      },
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

### Default opened accordion

<Canvas>
  <Story
    name="Default opened"
    args={{
      id: 'accordion',
      tokens: {
        textAlign: 'left',
      },
      defaultIsOpen: true,
      icon: <CloseBtn />,
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

### Accordion with focusable items inside

<Canvas>
  <Story
    name="With focusable items"
    args={{
      id: 'accordion',
      tokens: {
        textAlign: 'left',
      },
      icon: <CloseBtn />,
    }}
  >
    {TemplateWithFocusableChildren.bind({})}
  </Story>
</Canvas>